(()=>{"use strict";var e={6706:(e,t,r)=>{function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=window.location.pathname;const a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r;return t=e,(r=[{key:"currentLocation",value:function(){return o}}])&&n(t.prototype,r),e}();r(6124);var c=r(7187),i=r.n(c);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}io();const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(c,e);var t,r,n,o,a=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(o){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).marker=e,t.cell=t.createCell(),t.events(),t}return t=c,(r=[{key:"events",value:function(){var e=this;this.cell.addEventListener("click",(function(){console.log(e.marker),e.fillCell(),e.emit("boardClicked")}))}},{key:"fillCell",value:function(){this.cell.classList.contains("tictactoe-board__cell--circle")||this.cell.classList.contains("tictactoe-board__cell--x")?console.log("invalid move"):"o"==this.marker?this.cell.classList.add("tictactoe-board__cell--circle"):this.cell.classList.add("tictactoe-board__cell--x")}},{key:"createCell",value:function(){var e=document.createElement("div");return e.classList.add("tictactoe-board__cell"),e.setAttribute("data-cell",""),e}},{key:"getCell",value:function(){return this.cell}},{key:"setMarker",value:function(e){this.marker=e}}])&&u(t.prototype,r),c}(i());function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}io();const g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,r,n,o,a=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(n);if(o){var r=w(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return v(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this)).cells=[],t.currentPlayer=e,t.winner,t.boardArray=[["","",""],["","",""],["","",""]],t.matches={x:[],o:[]},t.clusterBoard=t.createBoard(),t.setBoardPlayer(e),t.setupBoardInteraction(),t}return t=c,(r=[{key:"createBoard",value:function(){var e=document.createElement("div");e.classList.add("tictactoe-board__cluster"),e.setAttribute("data-cluster","");for(var t=0;t<9;t++){var r=new h(this.currentPlayer);e.appendChild(r.getCell()),this.cells.push(r)}return e}},{key:"setupBoardInteraction",value:function(){var e=this;this.cells.map((function(t,r){t.on("boardClicked",(function(){window.socket.emit("boardClicked",{index:r}),e.fillBoard(r);var t=e.checkHorizontalMatches(),n=e.checkVerticalMatches(),o=e.checkDiagonalMatches();e.colorMatch(),t||n||o?(console.log("emitting the winner ".concat(e.winner)),e.emit("gameFinished")):(e.emit("clusterboardClicked"),e.cells.forEach((function(t){"x"==e.currentPlayer?t.setMarker("x"):t.setMarker("o")})))}))})),window.socket.on("boardClicked",(function(t){console.log(e.cells[t.index].fillCell())}))}},{key:"setBoardPlayer",value:function(e){"x"==e?(this.clusterBoard.classList.remove("tictactoe-board__cluster--circle-is-visible"),this.clusterBoard.classList.add("tictactoe-board__cluster--x-is-visible")):(this.clusterBoard.classList.add("tictactoe-board__cluster--circle-is-visible"),this.clusterBoard.classList.remove("tictactoe-board__cluster--x-is-visible"))}},{key:"setCurrentPlayer",value:function(e){this.currentPlayer=e}},{key:"getClusterBoard",value:function(){return this.clusterBoard}},{key:"colorMatch",value:function(){var e=this.matches;for(var t in e)for(var r=e[t],n=0;n<r.length;n++)for(var o=0;o<r[n].length;o++)if("x"==t){var a=r[n][o];this.cells[a].getCell().classList.add("tictactoe-board__cell--red")}else{var c=r[n][o];this.cells[c].getCell().classList.add("tictactoe-board__cell--blue")}}},{key:"checkDiagonalMatches",value:function(){for(var e=!0,t=!0,r=this.boardArray[0][0],n=this.boardArray[0][2],o=[0],a=[2],c=1;c<this.boardArray.length;c++){var i=this.boardArray.length-1;if(""==r||r!=this.boardArray[c][c])e=!1,o=[];else{var l=this.convertBoardLocationToIndex(c,c);o.push(l)}if(""==n||n!=this.boardArray[c][i-c])t=!1,a=[];else{var u=this.convertBoardLocationToIndex(c,i-c);a.push(u)}}return 3==a.length&&(this.winner=n,this.matches[n].push(a)),3==o.length&&(this.winner=r,this.matches[r].push(o)),e||t}},{key:"checkVerticalMatches",value:function(){for(var e,t=[],r=0;r<this.boardArray[0].length;r++){var n=this.boardArray[0][r];e=!0,t.push(this.convertBoardLocationToIndex(0,r));for(var o=1;o<this.boardArray.length;o++){if(""==n||n!=this.boardArray[o][r]){e=!1,t=[];break}t.push(this.convertBoardLocationToIndex(o,r))}if(1==e)return this.winner=n,this.matches[n].push(t),e}return e}},{key:"checkHorizontalMatches",value:function(){for(var e,t=[],r=0;r<this.boardArray.length;r++){var n=this.boardArray[r][0];e=!0,t.push(this.convertBoardLocationToIndex(r,0));for(var o=1;o<this.boardArray[0].length;o++){if(""==n||n!=this.boardArray[r][o]){e=!1,t=[];break}t.push(this.convertBoardLocationToIndex(r,o))}if(1==e)return this.winner=n,this.matches[n].push(t),e}return e}},{key:"convertIndexToBoardLocation",value:function(e){return[Math.floor(e/3),e%3]}},{key:"convertBoardLocationToIndex",value:function(e,t){return e%3*3+t%3}},{key:"fillBoard",value:function(e){var t,r,n=(t=this.convertIndexToBoardLocation(e),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(n=(c=i.next()).done)&&(r.push(c.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}}(t,r)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];this.boardArray[o][a]=this.currentPlayer}},{key:"getWinner",value:function(){return this.winner}}])&&b(t.prototype,r),c}(i());function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(c,e);var t,r,n,o,a=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(o){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return P(this,e)});function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.call(this)).board=document.querySelector(".tictactoe-board"),e.boardArray=[],e.currentPlayer="x",e.clusterBoard=new g(e.currentPlayer),e.injectHTML(),e.runGame(),e}return t=c,(r=[{key:"injectHTML",value:function(){this.board.appendChild(this.clusterBoard.getClusterBoard())}},{key:"swapTurns",value:function(){"x"==this.currentPlayer?this.currentPlayer="o":this.currentPlayer="x"}},{key:"runGame",value:function(){var e=this;this.clusterBoard.on("clusterboardClicked",(function(){e.swapTurns(),e.clusterBoard.setCurrentPlayer(e.currentPlayer),e.clusterBoard.setBoardPlayer(e.currentPlayer)})),this.clusterBoard.on("gameFinished",(function(){e.emit("boardGameFinished")}))}},{key:"destroyBoard",value:function(){for(;this.board.firstChild;)this.board.removeChild(this.board.lastChild)}},{key:"getWinner",value:function(){return this.clusterBoard.getWinner()}}])&&T(t.prototype,r),c}(i());function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t,r,n,o,a,c){try{var i=e[a](c),l=i.value}catch(e){return void r(e)}i.done?t(l):Promise.resolve(l).then(n,o)}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(l,e);var t,r,n,o,a,c,i=(a=l,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(a);if(c){var r=M(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return B(this,e)});function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=i.call(this)).modal=document.querySelector(".modal"),e.start=document.querySelector("#start"),e.winningMessage=document.querySelector(".modal__winner-text"),e.interface="",e.currentTicTacToeGame,e}return t=l,(r=[{key:"initializeGame",value:function(){var e=this;this.currentTicTacToeGame=new L,this.modal.classList.add("modal--is-visible"),this.start.addEventListener("click",(function(t){e.startGame(t)}))}},{key:"startGame",value:function(e){e.preventDefault(),this.modal.classList.remove("modal--is-visible"),this.currentTicTacToeGame.destroyBoard(),this.currentTicTacToeGame=new L,this.checkGameState()}},{key:"restartGame",value:(n=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.sleep(300);case 2:this.start.innerHTML="Play Again",this.winningMessage.classList.add("modal__winner-text--is-visible"),this.winningMessage.innerHTML="The winner is ".concat(this.currentTicTacToeGame.getWinner()),this.currentTicTacToeGame.destroyBoard(),this.events();case 7:case"end":return e.stop()}}),e,this)})),o=function(){var e=this,t=arguments;return new Promise((function(r,o){var a=n.apply(e,t);function c(e){j(a,r,o,c,i,"next",e)}function i(e){j(a,r,o,c,i,"throw",e)}c(void 0)}))},function(){return o.apply(this,arguments)})},{key:"checkGameState",value:function(){var e=this;this.currentTicTacToeGame.on("boardGameFinished",(function(){e.restartGame()}))}},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}])&&S(t.prototype,r),l}(i());function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const E=function(){function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.placement=r,this.injectHTML()}var t,r;return t=e,(r=[{key:"injectHTML",value:function(){var e=document.createElement("a");e.innerHTML=this.name,e.classList.add("btn","btn--margin-small");var t=encodeURIComponent(this.name);e.setAttribute("href","/".concat(t)),this.placement.insertAdjacentElement("beforeend",e)}}])&&R(t.prototype,r),e}();window.socket=io();var G={onlineTwoPlayer:{name:"Online Multiplayer",encodedName:encodeURIComponent("Online Multiplayer")},localTwoPlayer:{name:"Local Multiplayer",encodedName:encodeURIComponent("Local Multiplayer")},singlePlayer:{name:"Single Player",encodedName:encodeURIComponent("Single Player")}},I=new a,H=document.createElement("h1"),D=document.querySelector("#message-area");H.innerHTML="Choose an opponent","/"==I.currentLocation()?(D.insertAdjacentElement("beforeend",H),new E(G.singlePlayer.name,D),new E(G.localTwoPlayer.name,D),new E(G.onlineTwoPlayer.name,D)):I.currentLocation()=="/".concat(G.singlePlayer.encodedName)?(H.innerHTML="We are still putting together a smart tic tac toe bot! In the meantime feel free to play against humans.",D.insertAdjacentElement("beforeend",H),new E(G.localTwoPlayer.name,D),new E(G.onlineTwoPlayer.name,D)):I.currentLocation()=="/".concat(G.onlineTwoPlayer.encodedName)||I.currentLocation()=="/".concat(G.localTwoPlayer.encodedName)?(new A).initializeGame():"/404"==I.currentLocation()?(H.innerHTML="Welcome to failure land! 🙃",gameSpace.insertAdjacentElement("afterbegin",H)):(console.log(I.currentLocation(),"/".concat(G.localTwoPlayer.encodedName),I.currentLocation()=="/".concat(G.localTwoPlayer.encodedName)),document.querySelector(".game-space").innerHTML="<h1>Error page</h1>")}},t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.m=e,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={179:0},t=[[6706,286]],n=()=>{};function o(){for(var n,o=0;o<t.length;o++){for(var a=t[o],c=!0,i=1;i<a.length;i++){var l=a[i];0!==e[l]&&(c=!1)}c&&(t.splice(o--,1),n=r(r.s=a[0]))}return 0===t.length&&(r.x(),r.x=()=>{}),n}r.x=()=>{r.x=()=>{},c=c.slice();for(var e=0;e<c.length;e++)a(c[e]);return(n=o)()};var a=o=>{for(var a,c,[l,u,s,f]=o,y=0,h=[];y<l.length;y++)c=l[y],r.o(e,c)&&e[c]&&h.push(e[c][0]),e[c]=0;for(a in u)r.o(u,a)&&(r.m[a]=u[a]);for(s&&s(r),i(o);h.length;)h.shift()();return f&&t.push.apply(t,f),n()},c=self.webpackChunktic_tac_toe_classified=self.webpackChunktic_tac_toe_classified||[],i=c.push.bind(c);c.push=a})(),r.x()})();